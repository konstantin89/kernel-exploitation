CFLAGS=-g -fno-stack-protector -Wall
CC=gcc
OBJS=kernel_env.o kernel_shellcode.o

all: exp_perfcount exp_perfcount_race


exp_perfcount_race: lib
	$(CC) $(CFLAGS) -o $@ exp_perfcount_race.c $(OBJS)

exp_perfcount: lib
	$(CC) $(CFLAGS) -o $@ exp_perfcount.c $(OBJS)

lib: kernel_env.o kernel_shellcode.o

kernel_env.o: kernel_env.c
kernel_shellcode.o: kernel_shellcode.c	

clean:
	@rm -f *.o exp_perfcount exp_perfcount_race exp_tiocl_houdini perfcount_bof_race
